<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>GUIwrapper</title>
	<link rel="stylesheet" href="../../Dependencies/Bootstrap-4.3.1/css/bootstrap.min.css">
	<link rel="stylesheet" href="../css/style.css" />
	<link rel="stylesheet" href="../css/roller.css" />
	<link rel="stylesheet" href="../css/dark-mode.css" />
	<link rel="stylesheet" href="../css/bootstrap-dynamic-tabs.css" />
</head>

<body>
	<div class="container" id="main">
		<h1><span class="badge badge-pill badge-secondary">GUI</span>wrapper</h1>
		<div class="custom-control custom-switch">
			<input type="checkbox" class="custom-control-input" id="darkSwitch" />
			<label class="custom-control-label" for="darkSwitch">Dark Mode</label>
		</div>
		<p class="lead">
			A simple cross platform graphical user interface wrapper to launch executable desktop applications
		</p>

		<button class="btn btn-secondary" style="margin-bottom: 2%;" onclick="changeNewProcessTabState();">Add new
			process tab</button>
		<div class="process-details" id="process-details">
			<div class="input-group mb-3 w-50">
				<input type="text" class="form-control" maxlength="50" id="tabName">
			</div>
			<button class="btn btn-secondary" id="addTabBtn" style="margin-bottom: 2%;" onclick="addNewTab();">Add
				tab</button>
		</div>
		<div id="tabs"></div>
	</div>
	<script>
	if (typeof module === 'object') {
		window.module = module; module = undefined;
	}
	</script>
	<script src="../javascript/jquery-3.5.1.min.js"></script>
	<script src="../javascript/jquery-ui.min.js"></script>
	<script src="../../Dependencies/Bootstrap-4.3.1/js/bootstrap.min.js"></script>
	<script src="../javascript/bootstrap-dynamic-tabs.js"></script>
	<script>if (window.module) module = window.module;</script>
	<script>

		var tabs = $('#tabs').bootstrapDynamicTabs();

		tabs.addTab({
			title: 'Home',
			text: 'In order to start a process, click the button called "Add new process tab". An input field will show, where you can add a custom name '
			+ 'for the process you\'ll be running. That way you can extinguish the processes and have a clear view of what\'s being used in the application.',
			closable: false,
			ID: 'home'
		});

		function loadAllProcesses() {
			const fs = require('fs');
			let rawdata = fs.readFileSync('../data/processes.json');
			let processes = JSON.parse(rawdata);
			console.log(processes);
		}

		function addNewTab() {
			var newTabName = $('#tabName').val();
			if (newTabName != "") {
				var html = `
				<div id="process" style="margin-top: 2%;">
					<p>
						<button class="btn btn-secondary" id="SelectProgramBtn">Select</button>
					</p>
					<p>
						Selected file:
					<div id="FilePath" class="text-light bg-dark textfile"></div>
					</p>
					<p>
						Additional input arguments:
					<div class="input-group mb-3 w-50">
						<div class="input-group-prepend">
							<span class="input-group-text">$</span>
						</div>
						<input type="text" class="form-control" maxlength="50" id="InputArgs">
					</div>
					</p>
					<p>
					<div class="btn-container">
						<button class="btn btn-secondary" id="StartProgramBtn" disabled>Start</button>
						<button class="btn btn-secondary" id="TerminateProgramBtn" disabled>Terminate</button>
						<span id="running"></span>
						<div id="lds-roller">
							<div></div>
							<div></div>
							<div></div>
							<div></div>
							<div></div>
							<div></div>
							<div></div>
							<div></div>
						</div>
					</div>
					</p>
					<p>
						Output:
					<div id="OutputData" class="text-light bg-dark textfile"></div>
					</p>
				</div>
				`;
				tabs.addTab({
					title: newTabName,
					html: html,
					closable: true,
					ID: newTabName
				});

				$('#tabName').val("");
				changeNewProcessTabState();
			}
		}

		function changeNewProcessTabState() {
			if ($("#process-details").is(":visible")) {
				$("#process-details").hide();
			} else {
				$("#process-details").show();
			}
		}


	</script>
	<script>
		// You can also require other files to run in this process
		require('../javascript/renderer.js');
		require('dark-mode-switch');
	</script>
</body>

</html>